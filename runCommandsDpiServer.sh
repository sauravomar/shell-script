#!/bin/bash - 
#===============================================================================
#
#          FILE: runCommandsDpiServer.sh
# 
#         USAGE: ./runCommandsDpiServer.sh 
# 
#   DESCRIPTION: 
# 
#       OPTIONS: ---
#  REQUIREMENTS: ---
#          BUGS: ---
#         NOTES: ---
#        AUTHOR: YOUR NAME (), 
#  ORGANIZATION: 
#       CREATED: Tuesday 10 April 2018 10:45:33  IST
#      REVISION:  ---
#===============================================================================
set -o nounset                              # Treat unset variables as an error

_usage(){
	echo "`basename $0` {commands to run}"
}


_ams_server=( "37.252.165.41" "37.252.165.42" "37.252.165.43" "37.252.165.44" "37.252.165.45" "37.252.165.46" "37.252.165.47" "37.252.165.48" "37.252.165.49" "37.252.165.50" "37.252.165.51" "37.252.165.52" "37.252.165.53" "37.252.165.54")

_nym_server=( "68.67.170.232" "68.67.170.233" "68.67.170.234" "68.67.170.235" "68.67.170.236" "68.67.170.237" "68.67.170.238" "68.67.170.239" "68.67.170.240" "68.67.170.241" "68.67.170.242" "68.67.170.243" "68.67.170.244" "68.67.170.245" "68.67.170.246" "68.67.170.247" "68.67.170.248" "68.67.170.249" "68.67.170.250" "68.67.170.251" "68.67.170.253" "68.67.170.254" "204.13.196.104" "204.13.196.105" "204.13.196.106" "204.13.196.107" "204.13.196.108" "204.13.196.109" "68.67.137.202" "68.67.137.203" "68.67.137.204" "68.67.137.205" "68.67.137.206" "68.67.137.207" "68.67.137.208" "68.67.137.209")

_sgp_server=( "103.227.12.38" "103.227.12.41")


[ $# -ne 1 ] && _usage && exit 1; 

for ip in "${_ams_server[@]}"
do
	result=`ssh -i ~/ssh-keys/apn-cld root@$ip "$1"` 
	echo -e  "$ip \n  $result"  >> result.txt
done	


for ip in "${_nym_server[@]}"
do
	result=`ssh -i ~/ssh-keys/apn-cld root@$ip "$1"`
	echo -e  "$ip \n  $result"  >> result.txt
done


for ip in "${_sgp_server[@]}"
do
	result=`ssh -i ~/ssh-keys/apn-cld root@$ip "$1"`
	echo -e  "$ip \n  $result"  >> result.txt
done

